/*!
* Verbatim.js 1.5.0
*
* Copyright 2014, nclud http://nclud.com
* Released under the GNU GPLv3 license
* http://www.gnu.org/licenses/gpl.html
*
* Built by Ramsay Lanier and Maxim Leyzerovich from nclud
*
* 
*/
!function(e){var t='<svg version="1.1" id="twitterLogo" class="verbatim-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"> <path fill="#FFFFFF" d="M45,13.2c-1.4,0.6-2.9,1-4.5,1.2c1.6-1,2.8-2.5,3.4-4.3C42.4,11,40.8,11.7,39,12c-1.4-1.5-3.4-2.5-5.7-2.5c-4.3,0-7.8,3.5-7.8,7.8c0,0.6,0.1,1.2,0.2,1.8c-6.5-0.3-12.2-3.4-16-8.1c-0.7,1.1-1.1,2.5-1.1,3.9c0,2.7,1.4,5.1,3.5,6.5c-1.3,0-2.5-0.4-3.5-1c0,0,0,0.1,0,0.1c0,3.8,2.7,6.9,6.2,7.6c-0.7,0.2-1.3,0.3-2.1,0.3c-0.5,0-1,0-1.5-0.1c1,3.1,3.9,5.3,7.3,5.4c-2.7,2.1-6,3.3-9.7,3.3c-0.6,0-1.2,0-1.9-0.1c3.4,2.2,7.5,3.5,11.9,3.5c14.3,0,22.1-11.9,22.1-22.1c0-0.3,0-0.7,0-1C42.6,16.2,43.9,14.8,45,13.2z"/></svg>',n={highlightParent:!0,searchContainer:"body",highlightedClass:"highlight",highlightColor:"rgb(255,255,0)",selectedClass:"verbatim-selected-text",buttonClass:"verbatim-button-container",animated:!0,animationSpeed:2e3,scrollingOffset:200,allowImages:!0};e.fn.verbatim=function(o){function a(){s(),I=setTimeout(function(){i()},500)}function i(){m=!1,v(e("body"))}function s(){clearTimeout(I)}var r=window.location.hash;r=r.replace("%C2%A0","%20");var l,c,d=decodeURIComponent(r).substr(1),g=e.extend({},n,o),u="",h=!1,m=!1,p=(navigator.userAgent||navigator.vendor||window.opera,/Firefox/.test(navigator.userAgent)),f=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);"image"==d.substr(0,5)&&(d=d.substr(7),h=!0);var w=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0?parseInt(e.substring(t+5,e.indexOf(".",t))):0},C=function(t,n){if(h&&n.allowImages){var o=e("img[src$='"+t+"']");o.addClass(n.highlightedClass),o.css({outline:"5px solid "+n.highlightColor})}else{var a=b();for(a.collapse(document.body,0);window.find(t);)if(document.body.spellcheck=!1,p){document.body.contentEditable="true",document.execCommand("HiliteColor",!1,n.highlightColor);var i=a.focusNode.parentNode;e(i).addClass(n.highlightedClass),a.collapseToEnd(),document.body.contentEditable="false"}else{document.designMode="on",document.execCommand("HiliteColor",!1,n.highlightColor);var i=a.anchorNode.parentNode;e(i).addClass(n.highlightedClass),a.collapseToEnd(),document.designMode="off"}i=a.anchorNode.parentNode,e(i).addClass(n.highlightedClass)}n.animated&&(e(function(){e("html, body").animate({scrollTop:0},0)}),e(window).load(function(){e("html, body").animate({scrollTop:e("."+n.highlightedClass).offset().top-parseInt(n.scrollingOffset)},parseInt(n.animationSpeed))})),n.highlightParent&&e("."+n.highlightedClass).parent().addClass(n.highlightedClass)},b=function(){if(window.getSelection)return window.getSelection();if(document.getSelection)return document.getSelection();var e=document.selection&&document.selection.createRange();return e.text?e.text:!1},v=function(t){function n(){setTimeout(function(){e("body").append(o),x()},310),setTimeout(function(){e(o).addClass("on-page")},320)}if(e("."+g.buttonClass).removeClass("on-page"),setTimeout(function(){e("."+g.buttonClass).remove()},300),!e(t).hasClass(g.selectedClass)){var o=document.createElement("div");if(o.setAttribute("class",g.buttonClass),o.innerHTML='<p class="verbatim-info">Share this selection:</p>',g.allowImages&&e(t).is("img"))u="image: "+e(t).attr("src"),n();else{var a=b();a.isCollapsed||(u=a.toString(),n())}}},x=function(){c=u,l=window.location.origin+window.location.pathname+"#"+encodeURIComponent(c),g.bitlyToken?e.getJSON("https://api-ssl.bitly.com/v3/shorten?",{access_token:g.bitlyToken,longUrl:l},function(e){l=200==e.status_code?e.data.url:window.location.origin+window.location.pathname+"#"+encodeURIComponent(c),y()}):(l=window.location.origin+window.location.pathname+"#"+encodeURIComponent(c),y())},y=function(){var n=document.createElement("textarea");n.setAttribute("class","verbatim-text-area"),n.setAttribute("wrap","off"),e("."+g.buttonClass).append(n),e(".verbatim-text-area").text(l),c.length>112&&(c=c.substring(0,112)+"..."),c='"'+c+'"';var o=document.createElement("a");o.setAttribute("class","verbatim-twitter-link"),o.setAttribute("target","_blank"),o.href="https://twitter.com/intent/tweet?url="+encodeURIComponent(l)+"&text="+encodeURIComponent(c),e("."+g.buttonClass).append(o),e(o).append(t),twttr.widgets.load()};if(!w()){if(f){var I,T=!1;e(g.searchContainer).on("touchend",function(t){return e(t.target).hasClass("verbatim-text-area")?(T=!1,e(t.target).select(),!1):void(T=!0)}),document.addEventListener("selectionchange",function(){T&&(a(),m=!0)},!1)}else e(g.searchContainer).on("mouseup",function(t){return e(t.target).hasClass("verbatim-text-area")?(e(t.target).select(),!1):void v(t.target)});d&&C(d,g)}}}(window.jQuery);